{"remainingRequest":"E:\\实战项目\\VueAdmin\\VueAdmin\\vueadmin-vue\\node_modules\\thread-loader\\dist\\cjs.js!E:\\实战项目\\VueAdmin\\VueAdmin\\vueadmin-vue\\node_modules\\babel-loader\\lib\\index.js!E:\\实战项目\\VueAdmin\\VueAdmin\\vueadmin-vue\\src\\router\\index.js","dependencies":[{"path":"E:\\实战项目\\VueAdmin\\VueAdmin\\vueadmin-vue\\src\\router\\index.js","mtime":1620452822479},{"path":"E:\\实战项目\\VueAdmin\\VueAdmin\\vueadmin-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\实战项目\\VueAdmin\\VueAdmin\\vueadmin-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\实战项目\\VueAdmin\\VueAdmin\\vueadmin-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBIb21lIGZyb20gJy4uL3ZpZXdzL0hvbWUudnVlJzsKaW1wb3J0IEluZGV4IGZyb20gJy4uL3ZpZXdzL0luZGV4LnZ1ZSc7CmltcG9ydCBVc2VyIGZyb20gJy4uL3ZpZXdzL3N5cy9Vc2VyLnZ1ZSc7CmltcG9ydCBSb2xlIGZyb20gJy4uL3ZpZXdzL3N5cy9Sb2xlLnZ1ZSc7CmltcG9ydCBNZW51IGZyb20gJy4uL3ZpZXdzL3N5cy9NZW51LnZ1ZSc7CmltcG9ydCBheGlvcyBmcm9tICIuLi9heGlvcyI7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSI7CmltcG9ydCBlbCBmcm9tICJlbGVtZW50LXVpL3NyYy9sb2NhbGUvbGFuZy9lbCI7ClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIG5hbWU6ICdIb21lJywKICBjb21wb25lbnQ6IEhvbWUsCiAgY2hpbGRyZW46IFt7CiAgICBwYXRoOiAnL2luZGV4JywKICAgIG5hbWU6ICdJbmRleCcsCiAgICBtZXRhOiB7CiAgICAgIHRpdGxlOiAi6aaW6aG1IgogICAgfSwKICAgIGNvbXBvbmVudDogSW5kZXgKICB9LCB7CiAgICBwYXRoOiAnL3VzZXJDZW50ZXInLAogICAgbmFtZTogJ1VzZXJDZW50ZXInLAogICAgbWV0YTogewogICAgICB0aXRsZTogIuS4quS6uuS4reW/gyIKICAgIH0sCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnQC92aWV3cy9Vc2VyQ2VudGVyLnZ1ZScpOwogICAgfQogIH0gLy8gewogIC8vIAlwYXRoOiAnL3N5cy91c2VycycsCiAgLy8gCW5hbWU6ICdTeXNVc2VyJywKICAvLyAJY29tcG9uZW50OiBVc2VyCiAgLy8gfSwKICAvLyB7CiAgLy8gCXBhdGg6ICcvc3lzL3JvbGVzJywKICAvLyAJbmFtZTogJ1N5c1JvbGUnLAogIC8vIAljb21wb25lbnQ6IFJvbGUKICAvLyB9LAogIC8vIHsKICAvLyAJcGF0aDogJy9zeXMvbWVudXMnLAogIC8vIAluYW1lOiAnU3lzTWVudScsCiAgLy8gCWNvbXBvbmVudDogTWVudQogIC8vIH0sCiAgXQp9LCB7CiAgcGF0aDogJy9sb2dpbicsCiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoJ0Avdmlld3MvTG9naW4udnVlJyk7CiAgfQp9XTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIG1vZGU6ICdoaXN0b3J5JywKICBiYXNlOiBwcm9jZXNzLmVudi5CQVNFX1VSTCwKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgdmFyIGhhc1JvdXRlID0gc3RvcmUuc3RhdGUubWVudXMuaGFzUm91dGVzOwogIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwoKICBpZiAodG8ucGF0aCA9PSAnL2xvZ2luJykgewogICAgbmV4dCgpOwogIH0gZWxzZSBpZiAoIXRva2VuKSB7CiAgICBuZXh0KHsKICAgICAgcGF0aDogJy9sb2dpbicKICAgIH0pOwogIH0gZWxzZSBpZiAodG9rZW4gJiYgIWhhc1JvdXRlKSB7CiAgICBheGlvcy5nZXQoIi9zeXMvbWVudS9uYXYiLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YSk7IC8vIOaLv+WIsG1lbnVMaXN0CgogICAgICBzdG9yZS5jb21taXQoInNldE1lbnVMaXN0IiwgcmVzLmRhdGEuZGF0YS5uYXYpOyAvLyDmi7/liLDnlKjmiLfmnYPpmZAKCiAgICAgIHN0b3JlLmNvbW1pdCgic2V0UGVybUxpc3QiLCByZXMuZGF0YS5kYXRhLmF1dGhvcml0eXMpOwogICAgICBjb25zb2xlLmxvZyhzdG9yZS5zdGF0ZS5tZW51cy5tZW51TGlzdCk7IC8vIOWKqOaAgee7keWumui3r+eUsQoKICAgICAgdmFyIG5ld1JvdXRlcyA9IHJvdXRlci5vcHRpb25zLnJvdXRlczsKICAgICAgcmVzLmRhdGEuZGF0YS5uYXYuZm9yRWFjaChmdW5jdGlvbiAobWVudSkgewogICAgICAgIGlmIChtZW51LmNoaWxkcmVuKSB7CiAgICAgICAgICBtZW51LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgLy8g6L2s5oiQ6Lev55SxCiAgICAgICAgICAgIHZhciByb3V0ZSA9IG1lbnVUb1JvdXRlKGUpOyAvLyDlkKfot6/nlLHmt7vliqDliLDot6/nlLHnrqHnkIbkuK0KCiAgICAgICAgICAgIGlmIChyb3V0ZSkgewogICAgICAgICAgICAgIG5ld1JvdXRlc1swXS5jaGlsZHJlbi5wdXNoKHJvdXRlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uc29sZS5sb2coIm5ld1JvdXRlcyIpOwogICAgICBjb25zb2xlLmxvZyhuZXdSb3V0ZXMpOwogICAgICByb3V0ZXIuYWRkUm91dGVzKG5ld1JvdXRlcyk7CiAgICAgIGhhc1JvdXRlID0gdHJ1ZTsKICAgICAgc3RvcmUuY29tbWl0KCJjaGFuZ2VSb3V0ZVN0YXR1cyIsIGhhc1JvdXRlKTsKICAgIH0pOwogIH0KCiAgbmV4dCgpOwp9KTsgLy8g5a+86Iiq6L2s5oiQ6Lev55SxCgp2YXIgbWVudVRvUm91dGUgPSBmdW5jdGlvbiBtZW51VG9Sb3V0ZShtZW51KSB7CiAgaWYgKCFtZW51LmNvbXBvbmVudCkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgcm91dGUgPSB7CiAgICBuYW1lOiBtZW51Lm5hbWUsCiAgICBwYXRoOiBtZW51LnBhdGgsCiAgICBtZXRhOiB7CiAgICAgIGljb246IG1lbnUuaWNvbiwKICAgICAgdGl0bGU6IG1lbnUudGl0bGUKICAgIH0KICB9OwoKICByb3V0ZS5jb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gaW1wb3J0KCdAL3ZpZXdzLycgKyBtZW51LmNvbXBvbmVudCArICcudnVlJyk7CiAgfTsKCiAgcmV0dXJuIHJvdXRlOwp9OwoKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["E:/实战项目/VueAdmin/VueAdmin/vueadmin-vue/src/router/index.js"],"names":["Vue","VueRouter","Home","Index","User","Role","Menu","axios","store","el","use","routes","path","name","component","children","meta","title","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","hasRoute","state","menus","hasRoutes","token","localStorage","getItem","get","headers","Authorization","then","res","console","log","data","commit","nav","authoritys","menuList","newRoutes","options","forEach","menu","e","route","menuToRoute","push","addRoutes","icon"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\nimport Index from '../views/Index.vue'\r\nimport User from '../views/sys/User.vue'\r\nimport Role from '../views/sys/Role.vue'\r\nimport Menu from '../views/sys/Menu.vue'\r\n\r\nimport axios from \"../axios\";\r\nimport store from \"../store\"\r\nimport el from \"element-ui/src/locale/lang/el\";\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tname: 'Home',\r\n\t\tcomponent: Home,\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tpath: '/index',\r\n\t\t\t\tname: 'Index',\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\ttitle: \"首页\"\r\n\t\t\t\t},\r\n\t\t\t\tcomponent: Index\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: '/userCenter',\r\n\t\t\t\tname: 'UserCenter',\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\ttitle: \"个人中心\"\r\n\t\t\t\t},\r\n\t\t\t\tcomponent: () => import('@/views/UserCenter.vue')\r\n\t\t\t},\r\n\t\t\t// {\r\n\t\t\t// \tpath: '/sys/users',\r\n\t\t\t// \tname: 'SysUser',\r\n\t\t\t// \tcomponent: User\r\n\t\t\t// },\r\n\t\t\t// {\r\n\t\t\t// \tpath: '/sys/roles',\r\n\t\t\t// \tname: 'SysRole',\r\n\t\t\t// \tcomponent: Role\r\n\t\t\t// },\r\n\t\t\t// {\r\n\t\t\t// \tpath: '/sys/menus',\r\n\t\t\t// \tname: 'SysMenu',\r\n\t\t\t// \tcomponent: Menu\r\n\t\t\t// },\r\n\t\t]\r\n\t},\r\n\r\n\t{\r\n\t\tpath: '/login',\r\n\t\tname: 'Login',\r\n\t\tcomponent: () => import('@/views/Login.vue')\r\n\t}\r\n]\r\n\r\nconst router = new VueRouter({\r\n\tmode: 'history',\r\n\tbase: process.env.BASE_URL,\r\n\troutes\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n\r\n\tlet hasRoute = store.state.menus.hasRoutes\r\n\r\n\tlet token = localStorage.getItem(\"token\")\r\n\r\n\tif (to.path == '/login') {\r\n\t\tnext()\r\n\r\n\t} else if (!token) {\r\n\t\tnext({path: '/login'})\r\n\r\n\r\n\t} else if(token && !hasRoute) {\r\n\t\taxios.get(\"/sys/menu/nav\", {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: localStorage.getItem(\"token\")\r\n\t\t\t}\r\n\t\t}).then(res => {\r\n\r\n\t\t\tconsole.log(res.data.data)\r\n\r\n\t\t\t// 拿到menuList\r\n\t\t\tstore.commit(\"setMenuList\", res.data.data.nav)\r\n\r\n\t\t\t// 拿到用户权限\r\n\t\t\tstore.commit(\"setPermList\", res.data.data.authoritys)\r\n\r\n\t\t\tconsole.log(store.state.menus.menuList)\r\n\r\n\t\t\t// 动态绑定路由\r\n\t\t\tlet newRoutes = router.options.routes\r\n\r\n\t\t\tres.data.data.nav.forEach(menu => {\r\n\t\t\t\tif (menu.children) {\r\n\t\t\t\t\tmenu.children.forEach(e => {\r\n\r\n\t\t\t\t\t\t// 转成路由\r\n\t\t\t\t\t\tlet route = menuToRoute(e)\r\n\r\n\t\t\t\t\t\t// 吧路由添加到路由管理中\r\n\t\t\t\t\t\tif (route) {\r\n\t\t\t\t\t\t\tnewRoutes[0].children.push(route)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tconsole.log(\"newRoutes\")\r\n\t\t\tconsole.log(newRoutes)\r\n\t\t\trouter.addRoutes(newRoutes)\r\n\r\n\t\t\thasRoute = true\r\n\t\t\tstore.commit(\"changeRouteStatus\", hasRoute)\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\tnext()\r\n})\r\n\r\n\r\n// 导航转成路由\r\nconst menuToRoute = (menu) => {\r\n\r\n\tif (!menu.component) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tlet route = {\r\n\t\tname: menu.name,\r\n\t\tpath: menu.path,\r\n\t\tmeta: {\r\n\t\t\ticon: menu.icon,\r\n\t\t\ttitle: menu.title\r\n\t\t}\r\n\t}\r\n\troute.component = () => import('@/views/' + menu.component +'.vue')\r\n\r\n\treturn route\r\n}\r\n\r\nexport default router\r\n"]}]}